(function(){"use strict";var e={7145:function(e,t,o){var n=o(5130),l=o(6768);const i={id:"app"};function a(e,t,o,n,a,s){const r=(0,l.g2)("HeaderComponent"),u=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(r),(0,l.bF)(u)])}var s=o(4232);const r={id:"container"},u={class:"header-left"},c={class:"logo"},v={class:"nav-links desktop-nav"},d={class:"header-right"},g={key:0},h={class:"user-info"};function p(e,t,o,n,i,a){const p=(0,l.g2)("font-awesome-icon"),m=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.Lk)("header",{class:(0,s.C4)(["app-header",{scrolled:n.isScrolled}])},[(0,l.Lk)("div",u,[(0,l.Lk)("div",c,[(0,l.bF)(m,{to:"/main"},{default:(0,l.k6)((()=>[(0,l.bF)(p,{icon:["fas","ticket"],style:{height:"100%",color:"#E50914"}})])),_:1})]),(0,l.Lk)("nav",v,[(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,[(0,l.bF)(m,{to:"/main"},{default:(0,l.k6)((()=>t[3]||(t[3]=[(0,l.eW)("홈")]))),_:1})]),(0,l.Lk)("li",null,[(0,l.bF)(m,{to:"/popular"},{default:(0,l.k6)((()=>t[4]||(t[4]=[(0,l.eW)("대세 콘텐츠")]))),_:1})]),(0,l.Lk)("li",null,[(0,l.bF)(m,{to:"/wishlist"},{default:(0,l.k6)((()=>t[5]||(t[5]=[(0,l.eW)("내가 찜한 리스트")]))),_:1})]),(0,l.Lk)("li",null,[(0,l.bF)(m,{to:"/search"},{default:(0,l.k6)((()=>t[6]||(t[6]=[(0,l.eW)("찾아보기")]))),_:1})])])])]),(0,l.Lk)("div",d,[n.isLoggedIn?((0,l.uX)(),(0,l.CE)("div",g,[(0,l.Lk)("span",h,"Welcome, "+(0,s.v_)(n.userName),1),(0,l.Lk)("button",{class:"icon-button",onClick:t[0]||(t[0]=(...e)=>n.handleLogout&&n.handleLogout(...e))},[(0,l.bF)(p,{icon:["fas","user"]}),t[7]||(t[7]=(0,l.eW)(" Logout "))])])):((0,l.uX)(),(0,l.Wv)(m,{key:1,to:"/sign-in",class:"icon-button"},{default:(0,l.k6)((()=>[(0,l.bF)(p,{icon:["fas","user"]}),t[8]||(t[8]=(0,l.eW)(" Sign In "))])),_:1})),(0,l.Lk)("button",{class:"icon-button mobile-menu-button",onClick:t[1]||(t[1]=(...e)=>n.toggleMobileMenu&&n.toggleMobileMenu(...e))},[(0,l.bF)(p,{icon:["fas","bars"]})])])],2),(0,l.Lk)("div",{class:(0,s.C4)(["mobile-nav",{open:n.isMobileMenuOpen}])},[(0,l.Lk)("button",{class:"close-button",onClick:t[2]||(t[2]=(...e)=>n.toggleMobileMenu&&n.toggleMobileMenu(...e))},[(0,l.bF)(p,{icon:["fas","times"]})]),(0,l.Lk)("nav",null,[(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,[(0,l.bF)(m,{to:"/main",onClick:n.toggleMobileMenu},{default:(0,l.k6)((()=>t[9]||(t[9]=[(0,l.eW)("홈")]))),_:1},8,["onClick"])]),(0,l.Lk)("li",null,[(0,l.bF)(m,{to:"/popular",onClick:n.toggleMobileMenu},{default:(0,l.k6)((()=>t[10]||(t[10]=[(0,l.eW)("대세 콘텐츠")]))),_:1},8,["onClick"])]),(0,l.Lk)("li",null,[(0,l.bF)(m,{to:"/wishlist",onClick:n.toggleMobileMenu},{default:(0,l.k6)((()=>t[11]||(t[11]=[(0,l.eW)("내가 찜한 리스트")]))),_:1},8,["onClick"])]),(0,l.Lk)("li",null,[(0,l.bF)(m,{to:"/search",onClick:n.toggleMobileMenu},{default:(0,l.k6)((()=>t[12]||(t[12]=[(0,l.eW)("찾아보기")]))),_:1},8,["onClick"])])])])],2)])}o(4114);var m=o(144),k=o(1387),f=o(5234);const b=(0,f.nY)("auth",{state:()=>({isLoggedIn:!1,user:null,tmdbApiKey:null}),actions:{initializeAuth(){const e=localStorage.getItem("kakaoAccessToken");e?(this.isLoggedIn=!0,window.Kakao.Auth.setAccessToken(e),window.Kakao.API.request({url:"/v2/user/me",success:e=>{this.user=e,this.tmdbApiKey={NODE_ENV:"production",BASE_URL:""}.VUE_APP_TMDB_API_KEY},fail:e=>{console.error("Failed to restore user info:",e),this.logout()}})):this.logout()},login(e){this.isLoggedIn=!0,this.user=e,this.tmdbApiKey={NODE_ENV:"production",BASE_URL:""}.VUE_APP_TMDB_API_KEY},logout(){this.isLoggedIn=!1,this.user=null,this.tmdbApiKey=null,localStorage.removeItem("kakaoAccessToken")}}});var w=o(292),y=o(2353),L=o(8950);L.Yv.add(y.X46,y.ycA,y.ckx,y.GRI);var _={name:"HeaderComponent",components:{FontAwesomeIcon:w.gc},setup(){const e=(0,m.KR)(!1),t=(0,m.KR)(!1),o=(0,k.rd)(),n=b(),i=(0,l.EW)((()=>n.isLoggedIn)),a=(0,l.EW)((()=>n.user?.properties?.nickname||"Guest")),s=()=>{localStorage.removeItem("kakaoAccessToken"),n.logout(),console.log("Is Logged In:",n.isLoggedIn),o.push("/sign-in")},r=()=>{t.value=!t.value},u=()=>{e.value=window.scrollY>50};return(0,l.sV)((()=>{window.addEventListener("scroll",u)})),(0,l.hi)((()=>{window.removeEventListener("scroll",u)})),{isScrolled:e,isMobileMenuOpen:t,isLoggedIn:i,userName:a,handleLogout:s,toggleMobileMenu:r}}},E=o(1241);const C=(0,E.A)(_,[["render",p],["__scopeId","data-v-6634f35a"]]);var K=C,M={name:"App",components:{HeaderComponent:K}};const I=(0,E.A)(M,[["render",a]]);var A=I;const R={class:"home"},P={key:1,class:"loading-banner"};function W(e,t,o,n,i,a){const s=(0,l.g2)("Banner"),r=(0,l.g2)("MovieRow");return(0,l.uX)(),(0,l.CE)("div",R,[n.featuredMovie?((0,l.uX)(),(0,l.Wv)(s,{key:0,movie:n.featuredMovie},null,8,["movie"])):((0,l.uX)(),(0,l.CE)("div",P,"로딩 중...")),(0,l.bF)(r,{key:"popular",title:"인기 영화",fetchUrl:n.getUniqueUrl(n.popularMoviesUrl)},null,8,["fetchUrl"]),(0,l.bF)(r,{key:"romanceMovies",title:"로맨스 영화",fetchUrl:n.getUniqueUrl(n.romanceMoviesUrl)},null,8,["fetchUrl"]),(0,l.bF)(r,{key:"actionMovies",title:"액션 영화",fetchUrl:n.getUniqueUrl(n.actionMoviesUrl)},null,8,["fetchUrl"]),(0,l.bF)(r,{key:"comedy",title:"코미디 영화",fetchUrl:n.getUniqueUrl(n.comedyMoviesUrl)},null,8,["fetchUrl"])])}const S={class:"banner-content"},U={key:0,class:"movie-rating"},T={key:1,class:"movie-release-date"},X={key:2,class:"movie-genres"};function F(e,t,o,n,i,a){return o.movie?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"banner",style:(0,s.Tr)({backgroundImage:`url(${a.backdropUrl})`})},[(0,l.Lk)("div",S,[(0,l.Lk)("h1",null,(0,s.v_)(o.movie.title),1),(0,l.Lk)("p",null,(0,s.v_)(o.movie.overview),1),o.movie.vote_average?((0,l.uX)(),(0,l.CE)("div",U," 평점: "+(0,s.v_)(o.movie.vote_average)+" / 10 ",1)):(0,l.Q3)("",!0),o.movie.release_date?((0,l.uX)(),(0,l.CE)("div",T," 개봉일: "+(0,s.v_)(a.formattedReleaseDate),1)):(0,l.Q3)("",!0),a.genres&&a.genres.length>0?((0,l.uX)(),(0,l.CE)("div",X," 장르: "+(0,s.v_)(a.genres.join(", ")),1)):(0,l.Q3)("",!0),t[0]||(t[0]=(0,l.Lk)("button",{class:"play-btn title-btn"},"재생",-1)),t[1]||(t[1]=(0,l.Lk)("button",{class:"info-btn title-btn"},"상세 정보",-1))])],4)):(0,l.Q3)("",!0)}o(1454);var V={name:"BannerComponent",props:{movie:{type:Object,required:!0}},computed:{backdropUrl(){return this.movie?`https://image.tmdb.org/t/p/original${this.movie.backdrop_path}`:""},formattedReleaseDate(){if(this.movie.release_date){const e=new Date(this.movie.release_date);return e.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}return null},genres(){return this.movie.genres&&this.movie.genres.length>0?this.movie.genres.map((e=>e.name)):[]}}};const O=(0,E.A)(V,[["render",F],["__scopeId","data-v-e3f8c8d6"]]);var N=O;const q={class:"movie-row"},B=["disabled"],D={class:"slider-window",ref:"sliderWindow"},x=["onClick"],j=["src","alt"],z={key:0,class:"wishlist-indicator"},Q={class:"movie-title"},$=["disabled"],H={key:0,class:"error-message"};function Y(e,t,o,n,i,a){return(0,l.uX)(),(0,l.CE)("div",q,[(0,l.Lk)("h2",null,(0,s.v_)(o.title),1),(0,l.Lk)("div",{class:"slider-container",onWheel:t[2]||(t[2]=(...e)=>n.handleWheel&&n.handleWheel(...e)),onTouchstart:t[3]||(t[3]=(...e)=>n.handleTouchStart&&n.handleTouchStart(...e)),onTouchmove:t[4]||(t[4]=(...e)=>n.handleTouchMove&&n.handleTouchMove(...e)),onTouchend:t[5]||(t[5]=(...e)=>n.handleTouchEnd&&n.handleTouchEnd(...e)),onMousemove:t[6]||(t[6]=(...e)=>n.handleMouseMove&&n.handleMouseMove(...e)),onMouseleave:t[7]||(t[7]=(...e)=>n.handleMouseLeave&&n.handleMouseLeave(...e))},[(0,l.Lk)("button",{class:"slider-button left",onClick:t[0]||(t[0]=e=>n.slide("left")),style:(0,s.Tr)({opacity:n.showButtons&&!n.atLeftEdge?1:0}),disabled:n.atLeftEdge}," < ",12,B),(0,l.Lk)("div",D,[(0,l.Lk)("div",{class:"movie-slider",ref:"slider",style:(0,s.Tr)({transform:`translateX(${-n.scrollAmount}px)`})},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.movies,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"movie-card",onClick:t=>n.toggleWishlist(e)},[(0,l.Lk)("img",{src:n.getImageUrl(e.poster_path),alt:e.title||"No Image"},null,8,j),n.isInWishlist(e.id)?((0,l.uX)(),(0,l.CE)("div",z,"👍")):(0,l.Q3)("",!0),(0,l.Lk)("div",Q,(0,s.v_)(e.title),1)],8,x)))),128))],4)],512),(0,l.Lk)("button",{class:"slider-button right",onClick:t[1]||(t[1]=e=>n.slide("right")),style:(0,s.Tr)({opacity:n.showButtons&&!n.atRightEdge?1:0}),disabled:n.atRightEdge}," > ",12,$)],32),0===n.movies.length?((0,l.uX)(),(0,l.CE)("p",H,"영화를 불러올 수 없습니다.")):(0,l.Q3)("",!0)])}var G=o(4373);o(8992),o(4520),o(7550);const J=(0,m.KR)([]);function Z(){const e=localStorage.getItem("movieWishlist");e&&(J.value=JSON.parse(e))}function ee(){localStorage.setItem("movieWishlist",JSON.stringify(J.value))}function te(e){const t=J.value.findIndex((t=>t.id===e.id));-1===t?J.value.push(e):J.value=J.value.filter((t=>t.id!==e.id)),ee()}function oe(e){return J.value.some((t=>t.id===e))}Z();var ne={name:"MovieRow",props:{title:{type:String,required:!0},fetchUrl:{type:String,required:!0}},setup(e){const t=(0,m.KR)([]),o=(0,m.KR)(null),n=(0,m.KR)(null),i=(0,m.KR)(0),a=(0,m.KR)(!1),s=(0,m.KR)(!1),r=(0,m.KR)(0),u=(0,m.KR)(0),c=(0,m.KR)(0),v=(0,m.KR)(null),d=async()=>{v.value&&v.value.cancel("Request canceled by new request."),v.value=G.A.CancelToken.source();try{t.value=[];const o=await G.A.get(e.fetchUrl,{cancelToken:v.value.token});o.data&&Array.isArray(o.data.results)?t.value=o.data.results:(console.warn("Invalid API response:",o.data),t.value=[])}catch(o){G.A.isCancel(o)?console.log("Previous request canceled:",o.message):(console.error("영화 데이터를 가져오는 중 오류 발생:",o.message||o),t.value=[])}},g=()=>{o.value&&n.value&&(c.value=Math.max(0,o.value.scrollWidth-n.value.clientWidth))},h=(e,t=null)=>{const o=t||.8*n.value.clientWidth;i.value="left"===e?Math.max(0,i.value-o):Math.min(c.value,i.value+o)},p=e=>e?`https://image.tmdb.org/t/p/w300${e}`:"/placeholder-image.jpg",k=()=>a.value=!0,f=()=>a.value=!1,b=e=>{if(s.value)return;s.value=!0;const t=e.deltaY>0?"right":"left";h(t),setTimeout((()=>{s.value=!1}),500)},w=e=>{r.value=e.touches[0].clientX,u.value=e.touches[0].clientX},y=e=>{u.value=e.touches[0].clientX},L=()=>{const e=r.value-u.value,t=50;if(Math.abs(e)>t){const t=e>0?"right":"left";h(t,Math.abs(e))}};return(0,l.sV)((()=>{d(),g(),window.addEventListener("resize",g)})),(0,l.wB)((()=>e.fetchUrl),(async()=>{await d()}),{immediate:!0}),{movies:t,slider:o,sliderWindow:n,scrollAmount:i,maxScroll:c,atLeftEdge:(0,l.EW)((()=>i.value<=0)),atRightEdge:(0,l.EW)((()=>i.value>=c.value)),showButtons:a,getImageUrl:p,slide:h,handleMouseMove:k,handleMouseLeave:f,handleWheel:b,handleTouchStart:w,handleTouchMove:y,handleTouchEnd:L,toggleWishlist:te,isInWishlist:oe}}};const le=(0,E.A)(ne,[["render",Y],["__scopeId","data-v-7d4679b0"]]);var ie=le,ae={name:"HomeMain",components:{Banner:N,MovieRow:ie},setup(){const e={NODE_ENV:"production",BASE_URL:""}.VUE_APP_TMDB_API_KEY;if(!e)return console.error("API 키가 없습니다. 로그인 후 다시 시도해 주세요."),{};const t=(0,m.KR)(null),o=(0,m.KR)(`https://api.themoviedb.org/3/movie/popular?api_key=${e}&language=ko-KR`),n=(0,m.KR)(`https://api.themoviedb.org/3/discover/movie?api_key=${e}&with_genres=10749&language=ko-KR`),i=(0,m.KR)(`https://api.themoviedb.org/3/discover/movie?api_key=${e}&with_genres=28&language=ko-KR`),a=(0,m.KR)(`https://api.themoviedb.org/3/discover/movie?api_key=${e}&with_genres=35&language=ko-KR`),s=e=>`${e}&t=${(new Date).getTime()}`,r=async()=>{try{const e=await fetch(s(o.value)),n=await e.json();t.value=n.results[0]}catch(e){console.error("Error fetching featured movie:",e)}},u=()=>{const e=document.querySelector(".app-header");window.scrollY>50?e?.classList.add("scrolled"):e?.classList.remove("scrolled")};return(0,l.sV)((()=>{r(),window.addEventListener("scroll",u)})),(0,l.xo)((()=>{window.removeEventListener("scroll",u)})),{featuredMovie:t,popularMoviesUrl:o,romanceMoviesUrl:n,actionMoviesUrl:i,comedyMoviesUrl:a,getUniqueUrl:s}}};const se=(0,E.A)(ae,[["render",W],["__scopeId","data-v-28cc74eb"]]);var re=se;const ue={class:"popular-container"},ce={class:"view-toggle"};function ve(e,t,o,n,i,a){const r=(0,l.g2)("MovieGrid"),u=(0,l.g2)("MovieInfiniteScroll");return(0,l.uX)(),(0,l.CE)("div",ue,[(0,l.Lk)("div",ce,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=e=>n.setView("grid")),class:(0,s.C4)({active:"grid"===n.currentView})},"Grid View",2),(0,l.Lk)("button",{onClick:t[1]||(t[1]=e=>n.setView("list")),class:(0,s.C4)({active:"list"===n.currentView})},"List View",2)]),"grid"===n.currentView?((0,l.uX)(),(0,l.Wv)(r,{key:0,fetchUrl:n.fetchURL,apiKey:n.apiKey},null,8,["fetchUrl","apiKey"])):(0,l.Q3)("",!0),"list"===n.currentView?((0,l.uX)(),(0,l.Wv)(u,{key:1,apiKey:n.apiKey,genreCode:"28"},null,8,["apiKey"])):(0,l.Q3)("",!0)])}const de={class:"movie-table-view"},ge={class:"movie-grid"},he=["onClick"],pe=["src","alt"],me={class:"movie-title"},ke={key:0,class:"wishlist-indicator"},fe={class:"pagination"},be=["disabled"],we=["disabled"];function ye(e,t,o,n,i,a){return(0,l.uX)(),(0,l.CE)("div",de,[(0,l.Lk)("div",ge,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.paginatedMovies,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"movie-card",onClick:t=>n.handleToggleWishlist(e)},[(0,l.Lk)("img",{src:n.getImageUrl(e.poster_path),alt:e.title},null,8,pe),(0,l.Lk)("div",me,(0,s.v_)(e.title),1),n.checkIsInWishlist(e.id)?((0,l.uX)(),(0,l.CE)("div",ke,"👍")):(0,l.Q3)("",!0)],8,he)))),128))]),(0,l.Lk)("div",fe,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.prevPage&&n.prevPage(...e)),disabled:1===n.currentPage},"이전",8,be),(0,l.Lk)("span",null,"페이지 "+(0,s.v_)(n.currentPage)+" / "+(0,s.v_)(n.totalPages),1),(0,l.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.nextPage&&n.nextPage(...e)),disabled:n.currentPage===n.totalPages},"다음",8,we)])])}var Le={props:["fetchUrl","apiKey"],setup(e){const t=(0,m.KR)(1),o=(0,m.KR)(1),n=(0,m.KR)([]),i=async(t=1)=>{try{const l=await G.A.get(e.fetchUrl,{params:{page:t}});n.value=l.data.results,o.value=l.data.total_pages}catch(l){console.error("Error fetching movies:",l)}},a=(0,l.EW)((()=>n.value)),s=()=>{t.value<o.value&&(t.value++,i(t.value))},r=()=>{t.value>1&&(t.value--,i(t.value))},u=e=>oe(e),c=e=>{te(e)};return(0,l.sV)((()=>{i(t.value)})),{paginatedMovies:a,currentPage:t,totalPages:o,nextPage:s,prevPage:r,getImageUrl:e=>e?`https://image.tmdb.org/t/p/w300${e}`:"/assets/default-movie-poster.jpg",checkIsInWishlist:u,handleToggleWishlist:c}}};const _e=(0,E.A)(Le,[["render",ye],["__scopeId","data-v-54f217e4"]]);var Ee=_e;const Ce={class:"movie-grid",ref:"gridContainer"},Ke=["onMouseup"],Me=["src","alt"],Ie={class:"movie-title"},Ae={key:0,class:"wishlist-indicator"},Re={ref:"loadingTrigger",class:"loading-trigger"},Pe={key:0,class:"loading-indicator"},We={key:1,class:"no-movies-message"};function Se(e,t,o,n,i,a){return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("div",Ce,[(0,l.Lk)("div",{class:(0,s.C4)(["grid-container",n.currentView])},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.visibleMovieGroups,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:(0,s.C4)(["movie-row",{full:e.length===n.rowSize}])},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"movie-card",onMouseup:t=>n.handleToggleWishlist(e)},[(0,l.Lk)("img",{src:n.getImageUrl(e.poster_path),alt:e.title,loading:"lazy"},null,8,Me),(0,l.Lk)("div",Ie,(0,s.v_)(e.title),1),n.checkIsInWishlist(e.id)?((0,l.uX)(),(0,l.CE)("div",Ae,"👍")):(0,l.Q3)("",!0)],40,Ke)))),128))],2)))),128))],2),(0,l.Lk)("div",Re,[n.isLoading?((0,l.uX)(),(0,l.CE)("div",Pe,t[1]||(t[1]=[(0,l.Lk)("div",{class:"spinner"},null,-1),(0,l.Lk)("span",null,"로딩 중...",-1)]))):n.hasMore||0!==n.movies.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",We,t[2]||(t[2]=[(0,l.Lk)("p",null,"해당 조건에 맞는 영화가 없습니다.",-1)])))],512),n.showTopButton?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>n.scrollToTopAndReset&&n.scrollToTopAndReset(...e)),class:"top-button","aria-label":"맨 위로 이동"}," Top ")):(0,l.Q3)("",!0)],512)])}o(8872);var Ue={name:"MovieInfiniteScroll",props:{genreCode:String,apiKey:String,sortingOrder:{type:String,default:"popularity.desc"},voteAverage:{type:Number,default:-1},language:{type:String,default:"en"}},setup(e){const t=(0,m.KR)([]),o=(0,m.KR)(1),n=(0,m.KR)(4),i=(0,m.KR)(!1),a=(0,m.KR)(window.innerWidth<=768),s=(0,m.KR)("grid"),r=(0,m.KR)(!0),u=(0,m.KR)(!1),c=(0,m.KR)(null),v=(0,m.KR)(null),d=(0,m.KR)(null),g=()=>{d.value=new IntersectionObserver((e=>{e[0].isIntersecting&&!i.value&&r.value&&h()}),{rootMargin:"100px",threshold:.1}),v.value&&d.value.observe(v.value)},h=async()=>{if(!i.value&&r.value){i.value=!0;try{const n={api_key:e.apiKey,language:e.language&&"all"!==e.language?e.language:"en",page:o.value,with_genres:e.genreCode&&"0"!==e.genreCode?e.genreCode:void 0,sort_by:e.sortingOrder??"popularity.desc","vote_average.gte":e.voteAverage>0?e.voteAverage:void 0};console.log("Fetching Movies with Params:",n);const l=await G.A.get("https://api.themoviedb.org/3/discover/movie",{params:n}),i=l.data.results;i&&0!==i.length?(t.value=[...t.value,...i],o.value++):(1===o.value&&(t.value=[]),r.value=!1)}catch(n){console.error("Error fetching movies:",n)}finally{i.value=!1}}},p=e=>e?`https://image.tmdb.org/t/p/w300${e}`:"/assets/default-movie-poster.jpg",k=(0,l.EW)((()=>t.value.reduce(((e,t,o)=>{const l=Math.floor(o/n.value);return e[l]||(e[l]=[]),e[l].push(t),e}),[])));(0,l.wB)([()=>e.genreCode,()=>e.sortingOrder,()=>e.voteAverage,()=>e.language],(()=>{L()}));const f=()=>{a.value=window.innerWidth<=768,b()},b=()=>{if(c.value){const e=c.value.offsetWidth,t=a.value?100:300,o=a.value?10:15;n.value=Math.floor(e/(t+o))}},w=()=>{const e=window.pageYOffset||document.documentElement.scrollTop;u.value=e>300},y=()=>{window.scrollTo({top:0,behavior:"smooth"})},L=()=>{t.value=[],o.value=1,r.value=!0,h()},_=e=>{te(e)},E=e=>oe(e);return(0,l.sV)((()=>{g(),h(),f(),window.addEventListener("resize",f),window.addEventListener("scroll",w)})),(0,l.hi)((()=>{window.removeEventListener("resize",f),window.removeEventListener("scroll",w),d.value&&d.value.disconnect()})),{movies:t,currentPage:o,rowSize:n,isLoading:i,isMobile:a,currentView:s,hasMore:r,showTopButton:u,gridContainer:c,loadingTrigger:v,visibleMovieGroups:k,fetchMovies:h,getImageUrl:p,scrollToTopAndReset:y,handleToggleWishlist:_,checkIsInWishlist:E}}};const Te=(0,E.A)(Ue,[["render",Se],["__scopeId","data-v-b5ed6130"]]);var Xe=Te;function Fe(e,t=1){const o=`https://api.themoviedb.org/3/movie/popular?api_key=${e}&language=ko-KR&page=${t}`;return console.log("Popular Movies URL:",o),o}var Ve={name:"HomePopular",components:{MovieGrid:Ee,MovieInfiniteScroll:Xe},setup(){const e=(0,m.KR)("grid"),t={NODE_ENV:"production",BASE_URL:""}.VUE_APP_TMDB_API_KEY;if(!t)return void console.error("API 키가 없습니다. 로그인 후 다시 시도해 주세요.");const o=Fe(t),n=t=>{e.value=t};return{currentView:e,setView:n,fetchURL:o,apiKey:t}}};const Oe=(0,E.A)(Ve,[["render",ve],["__scopeId","data-v-58220a2f"]]);var Ne=Oe;function qe(e,t,o,n,i,a){const s=(0,l.g2)("MovieWishlist");return(0,l.uX)(),(0,l.Wv)(s)}const Be={class:"movie-grid",ref:"gridContainer"},De=["onClick"],xe=["src","alt"],je={class:"movie-title"},ze={key:0,class:"empty-wishlist"},Qe={key:1,class:"pagination"},$e=["disabled"],He=["disabled"];function Ye(e,t,o,n,i,a){return(0,l.uX)(),(0,l.CE)("div",Be,[(0,l.Lk)("div",{class:(0,s.C4)(["grid-container",n.currentView])},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.visibleWishlistMovies,((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o,class:(0,s.C4)(["movie-row",{full:e.length===n.rowSize}])},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"movie-card",onClick:t=>n.toggleWishlist(e)},[(0,l.Lk)("img",{src:n.getImageUrl(e.poster_path),alt:e.title},null,8,xe),(0,l.Lk)("div",je,(0,s.v_)(e.title),1),t[2]||(t[2]=(0,l.Lk)("div",{class:"wishlist-indicator"},"👍",-1))],8,De)))),128))],2)))),128))],2),0===n.wishlistMovies.length?((0,l.uX)(),(0,l.CE)("div",ze," 위시리스트가 비어 있습니다. ")):(0,l.Q3)("",!0),n.totalPages>1?((0,l.uX)(),(0,l.CE)("div",Qe,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.prevPage&&n.prevPage(...e)),disabled:1===n.currentPage},"< 이전",8,$e),(0,l.Lk)("span",null,(0,s.v_)(n.currentPage)+" / "+(0,s.v_)(n.totalPages),1),(0,l.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.nextPage&&n.nextPage(...e)),disabled:n.currentPage===n.totalPages},"다음 >",8,He)])):(0,l.Q3)("",!0)],512)}var Ge=o(3606),Je={name:"MovieWishlist",setup(){const e=(0,m.KR)(null),t=(0,m.KR)(4),o=(0,m.KR)(20),n=(0,m.KR)(1),i=(0,m.KR)(window.innerWidth<=768),a=(0,m.KR)("grid"),s=(0,m.KR)([]),r=(0,m.KR)([]);let u;const c=()=>{s.value=J.value||[],d()},v=()=>{if(e.value){const n=e.value.offsetWidth,l=window.innerHeight-e.value.offsetTop,a=i.value?90:220,s=i.value?150:330,r=i.value?10:15,u=-10;t.value=Math.floor(n/(a+r));const c=Math.floor(l/(s+u));o.value=t.value*c,d()}},d=()=>{const e=(n.value-1)*o.value,l=e+o.value,i=s.value.slice(e,l);r.value=i.reduce(((e,o,n)=>{const l=Math.floor(n/t.value);return e[l]||(e[l]=[]),e[l].push(o),e}),[])},g=()=>{n.value<b.value&&(n.value++,d())},h=()=>{n.value>1&&(n.value--,d())},p=()=>{i.value=window.innerWidth<=768,v()},k=e=>{J.value.includes(e)?J.value=J.value.filter((t=>t.id!==e.id)):J.value.push(e),c()},f=e=>e?`https://image.tmdb.org/t/p/w300${e}`:"/placeholder-image.jpg",b=(0,m.KR)(0);return(0,l.nT)((()=>{b.value=Math.ceil(s.value.length/o.value)})),(0,l.sV)((()=>{c(),p(),window.addEventListener("resize",p),u=new Ge.A((()=>v())),e.value&&u.observe(e.value)})),(0,l.hi)((()=>{window.removeEventListener("resize",p),e.value&&u.unobserve(e.value),u.disconnect()})),{gridContainer:e,rowSize:t,moviesPerPage:o,currentPage:n,isMobile:i,currentView:a,wishlistMovies:s,visibleWishlistMovies:r,totalPages:b,nextPage:g,prevPage:h,handleResize:p,toggleWishlist:k,getImageUrl:f}}};const Ze=(0,E.A)(Je,[["render",Ye],["__scopeId","data-v-4720f8aa"]]);var et=Ze,tt={name:"HomeWishlistComponent",components:{MovieWishlist:et}};const ot=(0,E.A)(tt,[["render",qe],["__scopeId","data-v-4cf7d73c"]]);var nt=ot;const lt={key:0,class:"container-search"},it={class:"container-search-bar"},at=["value"],st=["value"],rt={class:"content-search"};function ut(e,t,o,i,a,r){const u=(0,l.g2)("MovieInfiniteScroll");return i.isLoggedIn?((0,l.uX)(),(0,l.CE)("div",lt,[(0,l.Lk)("div",it,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.selectedGenre=e),onChange:t[1]||(t[1]=(...e)=>i.applyFilters&&i.applyFilters(...e)),class:"filter-select"},[t[5]||(t[5]=(0,l.Lk)("option",{value:"0"},"장르 (전체)",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.genreCode,((e,t)=>((0,l.uX)(),(0,l.CE)("option",{key:t,value:e},(0,s.v_)(t),9,at)))),128))],544),[[n.u1,i.selectedGenre]]),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.selectedVoteAverage=e),onChange:t[3]||(t[3]=(...e)=>i.applyFilters&&i.applyFilters(...e)),class:"filter-select"},[t[6]||(t[6]=(0,l.Lk)("option",{value:""},"평점 (전체)",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.voteAverages,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:e},(0,s.v_)(e)+" 이상 ",9,st)))),128))],544),[[n.u1,i.selectedVoteAverage]]),(0,l.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>i.resetFilters&&i.resetFilters(...e)),class:"reset-button"},"초기화")]),(0,l.Lk)("div",rt,[(0,l.bF)(u,{apiKey:i.apiKey,genreCode:i.selectedGenre,voteAverage:i.selectedVoteAverage},null,8,["apiKey","genreCode","voteAverage"])])])):(0,l.Q3)("",!0)}var ct={name:"HomeSearch",components:{MovieInfiniteScroll:Xe},setup(){const e=(0,k.rd)(),t=(0,m.KR)(!1),o={NODE_ENV:"production",BASE_URL:""}.VUE_APP_TMDB_API_KEY;(0,l.sV)((()=>{o.value?t.value=!0:e.push("/signin");const l=JSON.parse(localStorage.getItem("selectedOptions"));l&&(n.value=l.genreId||"0",i.value=l.voteAverage||"")}));const n=(0,m.KR)("0"),i=(0,m.KR)(""),a={Action:28,Adventure:12,Comedy:35,Crime:80,Drama:18,Family:10751,Fantasy:14,Horror:27,Romance:10749,"Science Fiction":878,Thriller:53},s=[5,6,7,8,9],r=()=>{localStorage.setItem("selectedOptions",JSON.stringify({genreId:n.value,voteAverage:i.value}))},u=()=>{n.value="0",i.value="",r()};return{isLoggedIn:t,apiKey:o,selectedGenre:n,selectedVoteAverage:i,genreCode:a,voteAverages:s,applyFilters:r,resetFilters:u}}};const vt=(0,E.A)(ct,[["render",ut],["__scopeId","data-v-2ca15c99"]]);var dt=vt;const gt={class:"login-container"};function ht(e,t,o,n,i,a){return(0,l.uX)(),(0,l.CE)("div",gt,[t[1]||(t[1]=(0,l.Lk)("h1",{class:"login-title"},"Welcome to Our Service",-1)),(0,l.Lk)("button",{class:"kakao-login-btn",onClick:t[0]||(t[0]=(...e)=>n.loginWithKakao&&n.loginWithKakao(...e))},"Login with Kakao")])}var pt={name:"SignIn",setup(){const e=b(),t=(0,k.rd)(),o=()=>{window.Kakao.isInitialized()?window.Kakao.Auth.login({success:o=>{console.log("Login successful:",o),localStorage.setItem("kakaoAccessToken",o.access_token),window.Kakao.API.request({url:"/v2/user/me",success:o=>{console.log("User Name:",o.properties.nickname),console.log("User ID:",o.id),console.log("Connected At:",o.connected_at),console.log("Email:",o.kakao_account?.email),e.login(o),localStorage.setItem("userName",o.properties.nickname),t.push("/main")},fail:e=>{console.error("Failed to fetch user info:",e),alert("Failed to fetch user information.")}})},fail:e=>{console.error("Login failed:",e),alert("Login failed. Please try again.")}}):console.error("Kakao SDK is not initialized")};return{loginWithKakao:o}}};const mt=(0,E.A)(pt,[["render",ht],["__scopeId","data-v-3304452e"]]);var kt=mt;const ft=()=>{const e=localStorage.getItem("kakaoAccessToken");return!!e},bt=[{path:"/",redirect:"/sign-in"},{path:"/main",name:"HomeMain",component:re,meta:{requiresAuth:!0}},{path:"/popular",name:"HomePopular",component:Ne,meta:{requiresAuth:!0}},{path:"/wishlist",name:"HomeWishlist",component:nt,meta:{requiresAuth:!0}},{path:"/search",name:"HomeSearch",component:dt,meta:{requiresAuth:!0}},{path:"/sign-in",name:"SignIn",component:kt}],wt=(0,k.aE)({history:(0,k.LA)(),routes:bt});wt.beforeEach(((e,t,o)=>{console.log("Navigating to:",e.path),console.log("Is Logged In:",ft()),e.meta.requiresAuth&&!ft()?(console.log("Redirecting to Sign In..."),o({path:"/sign-in",query:{redirect:e.fullPath}})):(console.log("Access granted to:",e.path),o())}));var yt=wt,Lt=o(7411);o(7917);if(!window.Kakao.isInitialized()){const e={NODE_ENV:"production",BASE_URL:""}.VUE_APP_KAKAO_JS_KEY;e?(window.Kakao.init(e),console.log("Kakao SDK initialized with key:",e)):console.error("Kakao JavaScript Key is missing.")}const _t=(0,n.Ef)(A),Et=(0,f.Ey)();_t.use(Et),_t.use(yt),_t.use(Lt.Ay);const Ct=b(),Kt=localStorage.getItem("kakaoAccessToken");Kt?(window.Kakao.Auth.setAccessToken(Kt),window.Kakao.API.request({url:"/v2/user/me",success:e=>{Ct.login(e),console.log("Login state restored:",e)},fail:e=>{console.error("Failed to restore login state:",e),localStorage.removeItem("kakaoAccessToken"),Ct.logout()}})):Ct.logout(),_t.mount("#app")}},t={};function o(n){var l=t[n];if(void 0!==l)return l.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(t,n,l,i){if(!n){var a=1/0;for(c=0;c<e.length;c++){n=e[c][0],l=e[c][1],i=e[c][2];for(var s=!0,r=0;r<n.length;r++)(!1&i||a>=i)&&Object.keys(o.O).every((function(e){return o.O[e](n[r])}))?n.splice(r--,1):(s=!1,i<a&&(a=i));if(s){e.splice(c--,1);var u=l();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,l,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,i,a=n[0],s=n[1],r=n[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(l in s)o.o(s,l)&&(o.m[l]=s[l]);if(r)var c=r(o)}for(t&&t(n);u<a.length;u++)i=a[u],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(c)},n=self["webpackChunkmy_vue_project"]=self["webpackChunkmy_vue_project"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(7145)}));n=o.O(n)})();
//# sourceMappingURL=app.de33a17a.js.map